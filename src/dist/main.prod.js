"use strict";var _vue=_interopRequireDefault(require("vue")),_App=_interopRequireDefault(require("./App.vue")),_router=_interopRequireDefault(require("./router")),_store=_interopRequireDefault(require("./store"));require("./plugins/element.js");var _storage=require("@/utils/storage"),_vueLazyload=_interopRequireDefault(require("vue-lazyload")),_axios=_interopRequireDefault(require("axios"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}_vue.default.use(_vueLazyload.default),_vue.default.use(_vueLazyload.default,{preload:1.3,error:"static/images/error.png",loading:"static/images/load.gif",attempt:1}),_vue.default.config.productionTip=!1,_vue.default.prototype.$http=_axios.default,_axios.default.interceptors.request.use(function(e){var t=(0,_storage.getStore)("token");return t&&(e.headers.common.Authorization=t),e},function(e){return Promise.reject(e)}),_router.default.beforeEach(function(r,e,u){_axios.default.post("/api/validate",{}).then(function(e){var t=e.data;1!==t.state?r.matched.some(function(e){return e.meta.auth})&&u({path:"/login",query:{redirect:r.fullPath}}):_store.default.commit("ISLOGIN",t),u()}).catch(function(e){console.log(e)})}),new _vue.default({router:_router.default,store:_store.default,render:function(e){return e(_App.default)}}).$mount("#app");